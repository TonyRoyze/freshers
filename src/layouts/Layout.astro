---
import background from "../assets/background2.png";
import background2 from "../assets/background.png";
import Image from "astro/components/Image.astro";
import "../styles/global.css";
import EventCarousel from "../components/EventCarousel.astro";

import PromoCompact from "../components/PromoCompact.astro";
---

<!doctype html>
<html lang="en" class="h-full w-full m-0">
    <head>
        <meta charset="UTF-8" />
        <meta name="theme-color" content="#483E81" />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/x-icon" href="/public/favicon.ico" />
        <meta name="generator" content={Astro.generator} />
        <title>Inter Faculty Championship</title>
    </head>
    <body class="mx-auto max-w-[650px]">
        <Image
            src={background}
            alt="background"
            class="fixed md:hidden top-0 left-0 w-full h-full -z-10"
            loading="eager"
            fetchpriority="high"
        />
        <Image
            src={background2}
            alt="background"
            class="hidden md:block fixed top-0 left-0 w-full h-full -z-10"
            loading="eager"
            fetchpriority="high"
        />
        <div class="min-h-dvh relative" id="container">
            <!-- <Navigation /> -->
            <main class="min-h-dvh p-6 max-w-[1440px]">
                <EventCarousel />
                <div id="promoContainer" class="mt-2 w-full justify-center">
                    <PromoCompact />
                </div>
                <slot />
            </main>
            <footer
                class="w-full bg-[var(--color-muted)]/60 backdrop-blur-sm p-4"
            >
                <div
                    class="max-w-[1440px] mx-auto flex justify-between items-center text-sm"
                >
                    <div>
                        <a
                            href="https://www.instagram.com/uoc_swimming/"
                            target="_blank"
                            rel="noopener noreferrer"
                            class="hover:text-white transition-colors"
                        >
                            Follow us on Instagram
                        </a>
                    </div>
                    <div>
                        <a
                            href="https://github.com/TonyRoyze/freshers"
                            target="_blank"
                            rel="noopener noreferrer"
                            class="hover:text-white transition-colors"
                        >
                            ‚≠ê Star on GitHub
                        </a>
                    </div>
                </div>
            </footer>
        </div>
        <script>
            const showPromo = () => {
                const promoContainer =
                    document.getElementById("promoContainer");
                if (!promoContainer) return;

                // Show promo
                promoContainer.classList.remove("hidden");
                promoContainer.style.opacity = "0";
                promoContainer.style.transform = "translateY(20px)";

                // Fade in animation
                setTimeout(() => {
                    promoContainer.style.transition = "all 0.5s ease";
                    promoContainer.style.opacity = "1";
                    promoContainer.style.transform = "translateY(0)";
                }, 100);

                // Hide after 10 seconds
                setTimeout(() => {
                    promoContainer.style.opacity = "0";
                    promoContainer.style.transform = "translateY(20px)";
                    setTimeout(() => {
                        promoContainer.classList.add("hidden");
                    }, 500);
                }, 10000);
            };

            // Initial delay between 5 and 15 seconds
            const initialDelay = Math.random() * (15000 - 5000) + 5000;

            // Show first time after initial delay
            setTimeout(() => {
                showPromo();
                // Then show every 30-60 seconds
                setInterval(() => {
                    const intervalDelay =
                        Math.random() * (60000 - 30000) + 30000;
                    setTimeout(showPromo, intervalDelay);
                }, 60000);
            }, initialDelay);
        </script>
    </body>
</html>
